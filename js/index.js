const main=document.querySelector(".main"),a2hs=document.querySelector(".promo"),a2hsbtn=document.querySelector(".bt"),loader=document.querySelector(".loader"),headlinein=document.querySelector(".headlineIn");let deferredPrompt;var cursor,i=0,yu;let options={root:null,rootMargins:"0px",threshold:.5};async function getdata(yu=0){const res=await fetch("/games.json").catch(error=>{console.log("Looks like there was a problem: \n",error)}),json=await res.json();try{for(;i<20+yu;){const div=document.createElement("div");div.setAttribute("class","box"),div.innerHTML=`<a href=/pages/play.html?s=${json[i].link}><img src=${json[i].thumb} alt=${json[i].title}_logo></a>\n                <h2>${json[i].title}</h2><hr>\n                <p>category :</p><a class=category href="/pages/category.html?cat=${json[i].category}">${json[i].category}</a><br>\n                <a href=/pages/play.html?s=${json[i].link}>Play</a>`,main.append(div),i++,cursor=i}}catch(err){console.log("no problem contact company",err)}}function handleIntersect(entries){entries[0].isIntersecting&&getdata(cursor)}function showAddToHomeScreen(){a2hs.style.display="block",loader.style.top="50%",headlinein.style.marginTop="0px",a2hsbtn.addEventListener("click",addToHomeScreen)}function addToHomeScreen(){a2hs.style.display="none",loader.style.top="40%",headlinein.style.marginTop="140px",deferredPrompt.prompt(),deferredPrompt.userChoice.then((function(choiceResult){"accepted"===choiceResult.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),deferredPrompt=null}))}window.addEventListener("load",async()=>{const observer=new IntersectionObserver(handleIntersect,options);try{observer.observe(document.querySelector(".foot"))}catch(err){console.log("observer error")}document.querySelector(".js-nav").addEventListener("click",()=>{document.querySelector("ul").classList.toggle("slide")}),await getdata(),loader.style.display="none",document.querySelector(".indexbody").style.overflowY="auto",window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),deferredPrompt=e,showAddToHomeScreen()}))});